# ============================================
# BIBLEWAY BACKEND ENVIRONMENT VARIABLES
# ============================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control
# Generate SECRET_KEY: python -c "import secrets; print(secrets.token_urlsafe(50))"


# ============================================
# DJANGO CORE SETTINGS
# ============================================

# Django Secret Key (REQUIRED - Generate a secure random key)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(50))"
SECRET_KEY=your-secret-key-here-CHANGE-THIS-IN-PRODUCTION

# Debug Mode (SECURITY WARNING: Never set to True in production!)
# Development: True
# Production: False
DEBUG=False

# Allowed Hosts (comma-separated list of domains)
# Include: your-domain.com, api.your-domain.com, Railway domain, localhost
ALLOWED_HOSTS=api.bibleway.io,.railway.app,localhost,127.0.0.1

# Environment (development, staging, production)
DJANGO_ENV=production


# ============================================
# DATABASE CONFIGURATION
# ============================================

# PostgreSQL Database URL
# Format: postgres://username:password@host:port/database
# Neon: postgres://user:password@ep-xxx.region.aws.neon.tech/bibleway
# Local: postgres://postgres:password@localhost:5432/bibleway
DATABASE_URL=postgres://user:password@host:5432/bibleway

# Database Connection Pool Settings (Optional)
DB_CONN_MAX_AGE=600
DB_CONN_HEALTH_CHECKS=True


# ============================================
# CORS & CSRF CONFIGURATION
# ============================================

# CORS Allowed Origins (comma-separated list)
# Include all frontend domains
CORS_ALLOWED_ORIGINS=https://bibleway.io,https://www.bibleway.io

# CSRF Trusted Origins (comma-separated list)
# Include frontend and backend domains
CSRF_TRUSTED_ORIGINS=https://bibleway.io,https://www.bibleway.io,https://api.bibleway.io


# ============================================
# FILE STORAGE (CLOUDFLARE R2 / S3)
# ============================================

# Cloudflare R2 / AWS S3 Access Credentials
AWS_ACCESS_KEY_ID=your-r2-access-key-id
AWS_SECRET_ACCESS_KEY=your-r2-secret-access-key

# Bucket Configuration
AWS_STORAGE_BUCKET_NAME=bibleway-media

# Region (use "auto" for Cloudflare R2)
AWS_S3_REGION_NAME=auto

# S3 Endpoint URL
# Cloudflare R2: https://<account-id>.r2.cloudflarestorage.com
# AWS S3: leave empty or https://s3.amazonaws.com
AWS_S3_ENDPOINT_URL=https://your-account-id.r2.cloudflarestorage.com

# S3 Signature Version
AWS_S3_SIGNATURE_VERSION=s3v4

# Presigned URL Expiration (in seconds)
AWS_S3_PRESIGNED_URL_EXPIRATION=3600

# Use S3 for static files (true/false)
USE_S3_FOR_STATIC=false


# ============================================
# ELASTICSEARCH CONFIGURATION
# ============================================

# Elasticsearch Host (without https://)
# Bonsai: your-cluster.bonsaisearch.net
# Self-hosted: localhost
ELASTICSEARCH_HOST=your-cluster.bonsaisearch.net

# Elasticsearch Port
ELASTICSEARCH_PORT=443

# SSL Configuration
ELASTICSEARCH_USE_SSL=true
ELASTICSEARCH_VERIFY_CERTS=true

# Authentication (if required)
ELASTICSEARCH_USERNAME=your-elasticsearch-username
ELASTICSEARCH_PASSWORD=your-elasticsearch-password

# Index Name for Bible Chapters
ELASTICSEARCH_INDEX_NAME=chapters_index

# Connection Timeout (seconds)
ELASTICSEARCH_TIMEOUT=30


# ============================================
# EMAIL CONFIGURATION (ZEPTOMAIL)
# ============================================

# ZeptoMail API Token
ZEPTOMAIL_API_TOKEN=your-zeptomail-api-token

# From Email Address
ZEPTOMAIL_FROM_EMAIL=noreply@bibleway.io

# From Name
ZEPTOMAIL_FROM_NAME=BibleWay

# Email Backend (for development, use console)
# Production: bible_way.email_backend.ZeptoMailBackend
# Development: django.core.mail.backends.console.EmailBackend
EMAIL_BACKEND=bible_way.email_backend.ZeptoMailBackend


# ============================================
# AUTHENTICATION (GOOGLE OAUTH & FIREBASE)
# ============================================

# Google OAuth Client ID
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com

# Google OAuth Client Secret (if needed)
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Firebase Admin SDK Configuration
# For local development: Place firebase-credentials.json in the backend root
# For production (Railway/Render): Set FIREBASE_CREDENTIALS_JSON with the full JSON content
# Project: local-22f77
FIREBASE_CREDENTIALS_JSON=


# ============================================
# JWT TOKEN CONFIGURATION
# ============================================

# JWT Access Token Lifetime (in hours)
JWT_ACCESS_TOKEN_LIFETIME_HOURS=7

# JWT Refresh Token Lifetime (in days)
JWT_REFRESH_TOKEN_LIFETIME_DAYS=7

# JWT Algorithm
JWT_ALGORITHM=HS256


# ============================================
# REDIS CONFIGURATION (OPTIONAL)
# ============================================

# Enable Redis (true/false)
# Required for: WebSocket scaling, caching, session storage
USE_REDIS=false

# Redis URL
# Format: redis://[:password]@host:port/db
# Railway: redis://default:password@redis.railway.internal:6379
# Upstash: redis://default:password@host.upstash.io:6379
# Local: redis://localhost:6379/0
REDIS_URL=redis://localhost:6379/0

# Redis Channel Layer (for Django Channels)
REDIS_CHANNEL_LAYER_HOST=localhost
REDIS_CHANNEL_LAYER_PORT=6379

# Redis Cache Configuration
REDIS_CACHE_TTL=300


# ============================================
# CELERY CONFIGURATION (OPTIONAL)
# ============================================

# Celery Broker URL (usually same as REDIS_URL)
CELERY_BROKER_URL=redis://localhost:6379/0

# Celery Result Backend
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Celery Timezone
CELERY_TIMEZONE=Asia/Kolkata


# ============================================
# SECURITY SETTINGS
# ============================================

# Session Cookie Settings
SESSION_COOKIE_SECURE=True
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax

# CSRF Cookie Settings
CSRF_COOKIE_SECURE=True
CSRF_COOKIE_HTTPONLY=True
CSRF_COOKIE_SAMESITE=Lax

# Secure SSL Redirect (only in production with HTTPS)
SECURE_SSL_REDIRECT=False

# HSTS Settings (enable in production)
SECURE_HSTS_SECONDS=0
SECURE_HSTS_INCLUDE_SUBDOMAINS=False
SECURE_HSTS_PRELOAD=False

# Content Security Policy
SECURE_CONTENT_TYPE_NOSNIFF=True
SECURE_BROWSER_XSS_FILTER=True


# ============================================
# LOGGING CONFIGURATION
# ============================================

# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Enable Django Debug Toolbar (development only)
ENABLE_DEBUG_TOOLBAR=False

# Sentry DSN (Error Tracking - Optional)
SENTRY_DSN=

# Sentry Environment
SENTRY_ENVIRONMENT=production

# Sentry Traces Sample Rate (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1


# ============================================
# RATE LIMITING (OPTIONAL)
# ============================================

# Enable Rate Limiting
ENABLE_RATE_LIMITING=true

# Default Rate Limit (requests per minute)
DEFAULT_RATE_LIMIT=60/minute

# Authentication Rate Limit
AUTH_RATE_LIMIT=5/minute

# API Rate Limit
API_RATE_LIMIT=100/minute


# ============================================
# WEBSOCKET CONFIGURATION
# ============================================

# WebSocket Allowed Origins (comma-separated)
WEBSOCKET_ALLOWED_ORIGINS=https://bibleway.io,https://www.bibleway.io

# Channel Layer Backend
# Development: channels.layers.InMemoryChannelLayer
# Production: channels_redis.core.RedisChannelLayer (requires Redis)
CHANNEL_LAYER_BACKEND=channels.layers.InMemoryChannelLayer


# ============================================
# TEXT-TO-SPEECH (GOOGLE CLOUD - OPTIONAL)
# ============================================

# Google Cloud TTS API Key Path
GOOGLE_APPLICATION_CREDENTIALS=

# Enable Text-to-Speech Feature
ENABLE_TEXT_TO_SPEECH=false


# ============================================
# ADMIN CONFIGURATION
# ============================================

# Admin URL Path (change for security)
ADMIN_URL=admin/

# Admin Site Title
ADMIN_SITE_TITLE=BibleWay Admin

# Admin Site Header
ADMIN_SITE_HEADER=BibleWay Administration


# ============================================
# FEATURE FLAGS
# ============================================

# Enable/Disable Features
ENABLE_USER_REGISTRATION=true
ENABLE_SOCIAL_FEATURES=true
ENABLE_PRAYER_REQUESTS=true
ENABLE_TESTIMONIALS=true
ENABLE_PROMOTIONS=true


# ============================================
# DEVELOPMENT SETTINGS
# ============================================

# Enable SQL Query Logging (development only)
SQL_DEBUG=False

# Enable Template Debug
TEMPLATE_DEBUG=False

# Allowed IPs for Debug (comma-separated)
INTERNAL_IPS=127.0.0.1,localhost
